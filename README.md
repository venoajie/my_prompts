# README.md

# Prompt Engineering Library (PEL)

This repository is a systematic, scalable library for developing, testing, and managing expert AI agents and their prompts. It is built on a config-driven architecture that prioritizes clarity, consistency, and automation.

## Core Philosophy

A prompt is not a command; it is the blueprint for an agent. The purpose of this library is to ensure that every blueprint is clear, robust, and capable of instantiating an expert AI that performs its function with maximum effectiveness and zero ambiguity.

## Core Concepts

1.  **Centralized Governance (`pel.config.yml`):** The architectural rules for the entire library—such as valid persona types and their required fields—are defined in the root `pel.config.yml` file.

2.  **Shared Automation (`scripts/common.mk`):** All common automation tasks (`generate-prompt`, `archive`, `clean`) are defined in a single, shared `scripts/common.mk` file. Project-specific `Makefile`s are minimal stubs that `include` this common logic.

3.  **Routed Invocation Model:** The library uses a single entry-point persona, `SI-1` (Session Initiator), to start all new tasks. The user provides a high-level goal, and `SI-1` intelligently routes it to the correct specialist agent by consulting a system-wide `persona_manifest.yml`.

## The Golden Path: Standard Workflow

This is the standard, end-to-end lifecycle for performing any task within the PEL.

### 1. Update System Manifests (If you've changed personas)

If you have added, removed, or significantly changed a persona, you must update the system's manifest of available agents.

```bash
# Run from the repository root
make generate-manifest
```
*(The system has a guardrail that will prevent you from starting a session with a stale manifest.)*

### 2. Initiate a New Session with `SI-1`

All new work begins by creating an instance file for the `SI-1` (Session Initiator) persona. This file states your high-level goal.

**Example: `projects/coding_trader_app/instances/start-debug-session.instance.md`**
```yaml
---
persona_alias: SI-1
---
<Mandate>
  <high_level_goal>
    My application crashed during runtime. I have the error log and need to find and fix the bug.
  </high_level_goal>
  <target_project>
    coding_trader_app
  </target_project>
  <persona_manifest>
    <Inject src="persona_manifest.yml" />
  </persona_manifest>
</Mandate>
```

### 3. Generate the Initiator Prompt

Navigate to the relevant project directory and run the `generate-prompt` command.

```bash
cd projects/coding_trader_app
make generate-prompt INSTANCE=instances/start-debug-session.instance.md
```

### 4. Execute the `SI-1` Response

The `SI-1` agent will analyze your goal and respond with a new, fully-formed `instance.md` file for the correct specialist agent (e.g., the `Debugging Analyst`). Save this new instance file as recommended by the agent.

### 5. Generate and Execute the Specialist Prompt

Now, use the new instance file generated by `SI-1` to create the prompt for the specialist.

```bash
# Example, using the file generated by SI-1
make generate-prompt INSTANCE=instances/01-debug-runtime-error.instance.md
```
This generates the final, actionable prompt for the specialist agent to perform the actual work.

## Other Commands

*   **Validation:** To ensure all personas are compliant, run `make validate` from the root directory.
*   **Archiving:** To archive a completed instance, run `make archive INSTANCE=<instance_name>` from within the project directory.
```

